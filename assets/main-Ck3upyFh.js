import{a as f,b as u,c as p,x as m}from"./@xterm-BcztChOp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=r(o);fetch(o.href,s)}})();const g=()=>{class e extends m.Terminal{constructor(r){const n={cursorBlink:!0,fontSize:14,fontFamily:"Consolas, monospace",theme:{background:"#161618",foreground:"#f0f0f0",cursor:"#f0f0f0",selectionBackground:"#44475a",black:"#21222C",brightBlack:"#6272A4"},rows:30,cols:80,allowProposedApi:!0};super({...n,...r})}}window.Terminal=e},y=e=>{e.onSelectionChange(()=>{const t=e.getSelection();t&&navigator.clipboard.writeText(t)}),e.onData(t=>{t===""&&e.clearSelection()}),e.onKey(t=>{t.domEvent.key==="Escape"&&e.clearSelection()})},b=e=>{const t=new f.FitAddon,r=new u.Unicode11Addon,n=new p.ClipboardAddon;return e.loadAddon(t),e.loadAddon(r),e.loadAddon(n),document.addEventListener("DOMContentLoaded",()=>{t.fit()}),e.unicode.activeVersion="11",e.onSelectionChange(()=>y(e)),{fitAddon:t}};g();const d=document.getElementById("terminal"),l=document.getElementById("serial"),c=document.getElementById("emulator-state");d.style.display="none";l.style.display="block";let h=0;const i=new window.V86({wasm_path:"/v86/v86.wasm",screen_container:l,serial_container_xtermjs:d,memory_size:void 0*1024**2,vga_memory_size:void 0*1024**2,bios:{url:"/bios/seabios.bin"},vga_bios:{url:"/bios/vgabios.bin"},cdrom:{url:void 0,async:!1},autostart:!0,network_relay_url:void 0});i.add_listener("serial0-output-byte",e=>{const t=String.fromCharCode(e);(t==="$"||t==="#")&&(i.serial_adapter.term.write(`\r
`),d.style.display="block",l.style.display="none",c.textContent="",b(i.serial_adapter.term),d.focus())});const w=e=>{const t=c;if(t.style.display="block",e.file_name.endsWith(".wasm")){const n=e.file_name.split("/");t.textContent=`Fetching ${n[n.length-1]} ...`;return}if(e.file_index===e.file_count-1&&e.loaded>=e.total-2048){t.textContent="Done downloading. Starting now ...";return}let r="Downloading images ";if(typeof e.file_index=="number"&&e.file_count&&(r+=`[${e.file_index+1}/${e.file_count}] `),e.total&&typeof e.loaded=="number"){let n=Math.floor(e.loaded/e.total*100);n=Math.min(100,Math.max(0,n));const o=Math.floor(n/2);r+=`${n}% [`,r+="#".repeat(o),r+=`${" ".repeat(50-o)}]`}else r+=".".repeat(h++%50);t.textContent=r};i.add_listener("download-progress",w);
